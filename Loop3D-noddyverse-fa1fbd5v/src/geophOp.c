/*
	This file was generated by XVT-Design 4.5, a product of:

		XVT Software Inc.
		4900 Pearl East Circle
		Boulder, CO USA 80301
		303-443-4223, fax 303-443-0969

	Generated on Tue Sep 02 10:34:59 1997
*/
/* TAG BEGIN SPCL:Pre_Header */
/* TAG END SPCL:Pre_Header */

#include "xvt.h"
#include "xvtcm.h"
#include "nodInc.h"

/* 
	Information about the window
*/
#define WIN_RES_ID GEOPHYSICS_OPTIONS_WINDOW
#define WIN_FLAGS 0x810L
#define WIN_CLASS ""
#define WIN_BORDER W_DOC
/* TAG BEGIN SPCL:Obj_Decl */
/* TAG END SPCL:Obj_Decl */

/*
	Handler for window GEOPHYSICS_OPTIONS_WINDOW ("Geophysics Options")
*/
long XVT_CALLCONV1
#if XVT_CC_PROTO
GEOPHYSICS_OPTIONS_WINDOW_eh XVT_CALLCONV2 (WINDOW xdWindow, EVENT *xdEvent)
#else
GEOPHYSICS_OPTIONS_WINDOW_eh XVT_CALLCONV2 (xdWindow, xdEvent)
WINDOW xdWindow;
EVENT *xdEvent;
#endif
{
	short xdControlId = xdEvent->v.ctl.id;
	/* TAG BEGIN SPCL:Var_Decl */
	/* TAG END SPCL:Var_Decl */

	switch (xdEvent->type) {
	case E_CREATE:
		/*
			Window has been created; first event sent to newly-created
			window.
		*/
		{
		/* TAG BEGIN EVNT:Create */
		int mmin, mmax;
		WINDOW ctlwin;
			/* put this window in the created heirachy */
		addWinToStack (xdWindow);
			/* Fill in the list box's */
		ctlwin = xvt_win_get_ctl (xdWindow, GEOPHYSICS_BOXING_CONSTANT);
		xvt_list_suspend (ctlwin);
		xvt_list_add (ctlwin , 0, "All");
		xvt_list_add (ctlwin , 1, "1000");
		xvt_list_add (ctlwin , 2, "2000");
		xvt_list_add (ctlwin , 3, "3000");
		xvt_list_add (ctlwin , 4, "4000");
		xvt_list_add (ctlwin , 5, "5000");
		xvt_list_add (ctlwin , 6, "6000");
		xvt_list_add (ctlwin , 7, "7000");
		xvt_list_add (ctlwin , 8, "8000");
		xvt_list_add (ctlwin , 9, "9000");
		xvt_list_add (ctlwin , 10, "10000");
		xvt_list_resume (ctlwin);
		ctlwin = xvt_win_get_ctl (xdWindow, GEOPHYSICS_BOXING_CLEVER);
		xvt_list_suspend (ctlwin);
		xvt_list_add (ctlwin , 0, "None");
		xvt_list_add (ctlwin , 1, "1:2");
		xvt_list_add (ctlwin , 2, "1:3");
		xvt_list_add (ctlwin , 3, "1:4");
		xvt_list_add (ctlwin , 4, "1:5");
		xvt_list_resume (ctlwin);
			/* ******************************** */
			/* set the ranges of the scrollbars */
							/* *************************** */
		mmin = -10000; mmax = 10000;		/* range for South West Corner */
		/*
		setScrollRange (xdWindow, WIN_118_HSCROLL_63, mmin, mmax);
		setScrollRange (xdWindow, WIN_118_HSCROLL_64, mmin, mmax);
		setScrollRange (xdWindow, WIN_118_HSCROLL_65, mmin, mmax);
		*/
							/* *************************** */
		mmin = -10000; mmax = 10000;		/* range for North East Corner */
		/*
		setScrollRange (xdWindow, WIN_118_HSCROLL_53, mmin, mmax);
		setScrollRange (xdWindow, WIN_118_HSCROLL_54, mmin, mmax);
		setScrollRange (xdWindow, WIN_118_HSCROLL_55, mmin, mmax);
		*/
					/* *********************************** */
					/* setup all the options in the window */
		loadGeophysicsOptions (xdWindow);
				/* *************************************************** */
				/* Check the consistency of scrollbars and text fields */
		/*
		updateScrollAndText (xdWindow, WIN_118_HSCROLL_63, WIN_118_EDIT_69, FALSE);
		updateScrollAndText (xdWindow, WIN_118_HSCROLL_64, WIN_118_EDIT_71, FALSE);
		updateScrollAndText (xdWindow, WIN_118_HSCROLL_65, WIN_118_EDIT_70, FALSE);
		updateScrollAndText (xdWindow, WIN_118_HSCROLL_53, WIN_118_EDIT_59, FALSE);
		updateScrollAndText (xdWindow, WIN_118_HSCROLL_54, WIN_118_EDIT_61, FALSE);
		updateScrollAndText (xdWindow, WIN_118_HSCROLL_55, WIN_118_EDIT_60, FALSE);
		*/
		/* TAG END EVNT:Create */
		}
		break;
	case E_DESTROY:
		/*
			Window has been closed; last event sent to window.
		*/
		xdRemoveHelpAssoc( xdWindow );
		{
		/* TAG BEGIN EVNT:Destroy */
			/* take this window out of the created heirachy */
		takeWinFromStack (xdWindow);
		/* TAG END EVNT:Destroy */
		}
		break;
	case E_FOCUS:
		{
		/* TAG BEGIN EVNT:Focus */
		/*
			Window has lost or gained focus.
		*/
		if (xdEvent->v.active)  {
			/*
				Window has gained focus
			*/
			updateGeophysicsOptions (xdWindow);
		} else {
			/*
				Window has lost focus
			*/
		}
		/* TAG END EVNT:Focus */
		}
		break;
	case E_SIZE:
		/*
			Size of window has been set or changed; sent when window is
			created or subsequently resized by user or via xvt_vobj_move.
		*/
		{
		/* TAG BEGIN EVNT:Size */
		/* TAG END EVNT:Size */
		}
		break;
	case E_UPDATE:
		/*
			Window requires updating.
		*/
		{
		/* TAG BEGIN EVNT:Update */
		xvt_dwin_clear(xdWindow, (COLOR)xvt_vobj_get_attr(xdWindow, ATTR_BACK_COLOR));
		/* TAG END EVNT:Update */
		}
		break;
	case E_CLOSE:
		/*
			Request to close window; user operated "close" menu item on
			window system menu, or operated "close" control on window
			frame. Not sent if Close on File menu is issued. Window not
			closed unless xvt_vobj_destroy is called.
		*/
		{
		/* TAG BEGIN EVNT:Close */
		xvt_vobj_destroy(xdWindow);
		/* TAG END EVNT:Close */
		}
		break;
	case E_CHAR:
		/*
			Character typed.
		*/
		{
		/* TAG BEGIN EVNT:Char */
			/* *********************************************** */
			/* make a RETURN key activate the window OK Button */
		if (xdEvent->v.chr.ch == '\r')
		{
		   xdEvent->type = E_CONTROL;
		   xdEvent->v.ctl.id = GEOPHYSICS_OPTIONS_OK;
		   xvt_win_dispatch_event (xdWindow, xdEvent);
		}
		/* TAG END EVNT:Char */
		}
		break;
	case E_MOUSE_UP:
		/*
			Mouse was released
		*/
		{
		/* TAG BEGIN EVNT:Mouse_Up */
		/* TAG END EVNT:Mouse_Up */
		}
		break;
	case E_MOUSE_DOWN:
		/*
			Mouse was pressed
		*/
		{
		/* TAG BEGIN EVNT:Mouse_Down */
		/* TAG END EVNT:Mouse_Down */
		}
		break;
	case E_MOUSE_DBL:
		/*
			Mouse was double clicked
		*/
		{
		/* TAG BEGIN EVNT:Mouse_Dbl */
		/* TAG END EVNT:Mouse_Dbl */
		}
		break;
	case E_MOUSE_MOVE:
		/*
			Mouse was moved
		*/
		{
		/* TAG BEGIN EVNT:Mouse_Move */
		/* TAG END EVNT:Mouse_Move */
		}
		break;
	case E_HSCROLL:
		{
		/* TAG BEGIN EVNT:Hscroll */
		/*
			Horizontal scrollbar on frame was operated
		*/
		switch (xdEvent->v.scroll.what) {
		case SC_LINE_UP:
			break;
		case SC_LINE_DOWN:
			break;
		case SC_PAGE_UP:
			break;
		case SC_PAGE_DOWN:
			break;
		case SC_THUMB:
			break;
		case SC_THUMBTRACK:
			break;
		default:
			break;
		}
		/* TAG END EVNT:Hscroll */
		}
		break;
	case E_VSCROLL:
		{
		/* TAG BEGIN EVNT:Vscroll */
		/*
			Vertical scrollbar on frame was operated
		*/
		switch (xdEvent->v.scroll.what) {
		case SC_LINE_UP:
			break;
		case SC_LINE_DOWN:
			break;
		case SC_PAGE_UP:
			break;
		case SC_PAGE_DOWN:
			break;
		case SC_THUMB:
			break;
		case SC_THUMBTRACK:
			break;
		default:
			break;
		}
		/* TAG END EVNT:Vscroll */
		}
		break;
	case E_COMMAND:
		/*
			User issued command on window menu bar (menu bar at top of
			screen for Mac/CH).
		*/
		{
		/* TAG BEGIN EVNT:Command */
		/*
			No menubar was associated with this window
		*/
		/* TAG END EVNT:Command */
		}
		break;
	case E_CONTROL:
		/*
			User operated control in window.
		*/
		{
		/* TAG BEGIN SPCL:Control_Decl */
		/* TAG END SPCL:Control_Decl */

		switch(xdControlId) {
		case WIN_118_RADIOBUTTON_42: /* "Surface" */
			{
			/* TAG BEGIN WIN_118_RADIOBUTTON_42 EVNT:Control */
			xdCheckRadioButton(xdWindow, WIN_118_RADIOBUTTON_42, WIN_118_RADIOBUTTON_42, WIN_118_RADIOBUTTON_43);
			xvt_vobj_set_enabled (xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C1), FALSE);
			xvt_vobj_set_enabled (xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C2), FALSE);
			/* TAG END WIN_118_RADIOBUTTON_42 EVNT:Control */
			}
			break;
		case WIN_118_RADIOBUTTON_43: /* "Airborne" */
			{
			/* TAG BEGIN WIN_118_RADIOBUTTON_43 EVNT:Control */
			xdCheckRadioButton(xdWindow, WIN_118_RADIOBUTTON_43, WIN_118_RADIOBUTTON_42, WIN_118_RADIOBUTTON_43);
			xvt_vobj_set_enabled (xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C1), TRUE);
			xvt_vobj_set_enabled (xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C2), TRUE);
			/* TAG END WIN_118_RADIOBUTTON_43 EVNT:Control */
			}
			break;
		case WIN_118_EDIT_48: /* "63000.0" */
			{
			/* TAG BEGIN WIN_118_EDIT_48 EVNT:Control */
			/*
				Edit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/* 
					Contents of control were changed
				*/
			}
			/* TAG END WIN_118_EDIT_48 EVNT:Control */
			}
			break;
		case WIN_118_EDIT_49: /* "-67.0" */
			{
			/* TAG BEGIN WIN_118_EDIT_49 EVNT:Control */
			/*
				Edit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/* 
					Contents of control were changed
				*/
			}
			/* TAG END WIN_118_EDIT_49 EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_OK: /* "OK" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_OK EVNT:Control */
			saveGeophysicsOptions(xdWindow);
			xvt_vobj_destroy(xdWindow);
			/* TAG END GEOPHYSICS_OPTIONS_OK EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_CANCEL: /* "Cancel" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_CANCEL EVNT:Control */
			xvt_vobj_destroy(xdWindow);
			/* TAG END GEOPHYSICS_OPTIONS_CANCEL EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_HELP: /* "Help..." */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_HELP EVNT:Control */
			displayHelp("gpscalcop.htm");
			/* TAG END GEOPHYSICS_OPTIONS_HELP EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_WIN_C2: /* "altitude" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_WIN_C2 EVNT:Control */
			/*
				Edit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/* 
					Contents of control were changed
				*/
			}
			/* TAG END GEOPHYSICS_OPTIONS_WIN_C2 EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_WIN_C4a: /* "Draped Survey" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_WIN_C4a EVNT:Control */
			WINDOW ctl_win = xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C4a);
			xvt_ctl_set_checked(ctl_win, (BOOLEAN) (!xvt_ctl_is_checked(ctl_win)));
			/* TAG END GEOPHYSICS_OPTIONS_WIN_C4a EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_WIN_C3: /* "Remanence" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_WIN_C3 EVNT:Control */
			WINDOW ctl_win = xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C3);
			xvt_ctl_set_checked(ctl_win, (BOOLEAN) (!xvt_ctl_is_checked(ctl_win)));
			/* TAG END GEOPHYSICS_OPTIONS_WIN_C3 EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_WIN_C4: /* "Anisotropy" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_WIN_C4 EVNT:Control */
			WINDOW ctl_win = xvt_win_get_ctl(xdWindow, GEOPHYSICS_OPTIONS_WIN_C4);
			xvt_ctl_set_checked(ctl_win, (BOOLEAN) (!xvt_ctl_is_checked(ctl_win)));
			/* TAG END GEOPHYSICS_OPTIONS_WIN_C4 EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_DECL: /* "Decl" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_DECL EVNT:Control */
			/*
				Edit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/* 
					Contents of control were changed
				*/
			}
			/* TAG END GEOPHYSICS_OPTIONS_DECL EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_SPATIAL: /* "Spatial" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_SPATIAL EVNT:Control */
			xdCheckRadioButton(xdWindow, GEOPHYSICS_OPTIONS_SPATIAL,
				GEOPHYSICS_OPTIONS_SPATIAL, GEOPHYSICS_OPTIONS_SPECTRAL);
			xvt_vobj_set_enabled (xvt_win_get_ctl(xdWindow,GEOPHYSICS_OPTIONS_WIN_C4a), FALSE); 
			/* TAG END GEOPHYSICS_OPTIONS_SPATIAL EVNT:Control */
			}
			break;
		case GEOPHYSICS_OPTIONS_SPECTRAL: /* "Spectral" */
			{
			/* TAG BEGIN GEOPHYSICS_OPTIONS_SPECTRAL EVNT:Control */
			xdCheckRadioButton(xdWindow, GEOPHYSICS_OPTIONS_SPECTRAL,
				GEOPHYSICS_OPTIONS_SPATIAL, GEOPHYSICS_OPTIONS_SPECTRAL);
			xvt_vobj_set_enabled (xvt_win_get_ctl(xdWindow,GEOPHYSICS_OPTIONS_WIN_C4a), TRUE); 
			/* TAG END GEOPHYSICS_OPTIONS_SPECTRAL EVNT:Control */
			}
			break;
		case GEOPHYSICS_BOXING_CLEVER: /* "cbox" */
			{
			/* TAG BEGIN GEOPHYSICS_BOXING_CLEVER EVNT:Control */
			WINDOW nbox, cbox;
			nbox = xvt_win_get_ctl (xdWindow, GEOPHYSICS_BOXING_CONSTANT);
			cbox = xvt_win_get_ctl (xdWindow, GEOPHYSICS_BOXING_CLEVER);
			if (xvt_list_get_sel_index (cbox) == 0)  /* turned off clever boxing */
			{
				xvt_vobj_set_enabled (cbox, FALSE);
				xvt_vobj_set_title (nbox, "All");
			}
			/* TAG END GEOPHYSICS_BOXING_CLEVER EVNT:Control */
			}
			break;
		case GEOPHYSICS_BOXING_CONSTANT: /* "nbox" */
			{
			/* TAG BEGIN GEOPHYSICS_BOXING_CONSTANT EVNT:Control */
			/*
				Listedit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/*
					Contents of control were changed
				*/
				char value[100];
				WINDOW nbox, cbox;
				nbox = xvt_win_get_ctl (xdWindow, GEOPHYSICS_BOXING_CONSTANT);
				cbox = xvt_win_get_ctl (xdWindow, GEOPHYSICS_BOXING_CLEVER);
				xvt_vobj_get_title (nbox, value, 100);
				if (strcmp(value, "All") == 0)
				{
					xvt_vobj_set_enabled (cbox, FALSE);
						 /* no cleaver boxing if all constant */
					xvt_list_set_sel (cbox, 0, TRUE);
				}
				else
				{
					xvt_vobj_set_enabled (cbox, TRUE);
						/* make sure not None if using clever boxing */
					if (xvt_list_get_sel_index (cbox) == 0)
						xvt_list_set_sel (cbox, 1, TRUE);
				}
			}
			/* TAG END GEOPHYSICS_BOXING_CONSTANT EVNT:Control */
			}
			break;
		case GEOPHYSICS_RANGE: /* "range" */
			{
			/* TAG BEGIN GEOPHYSICS_RANGE EVNT:Control */
#include <math.h>
			/*
				Edit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/*
					Contents of control were changed
				*/
				updateGeophysicsOptions (xdWindow);
			}
			/* TAG END GEOPHYSICS_RANGE EVNT:Control */
			}
			break;
		case GEOPHYSICS_MAG_COMPONENTS: /* "Save Components" */
			{
			/* TAG BEGIN GEOPHYSICS_MAG_COMPONENTS EVNT:Control */
			WINDOW ctl_win = xvt_win_get_ctl(xdWindow, GEOPHYSICS_MAG_COMPONENTS);
			xvt_ctl_set_checked(ctl_win, (BOOLEAN) (!xvt_ctl_is_checked(ctl_win)));
			/* TAG END GEOPHYSICS_MAG_COMPONENTS EVNT:Control */
			}
			break;
		case GEOPHYSICS_BLOCK_VIEW: /* "Block View Options..." */
			{
			/* TAG BEGIN GEOPHYSICS_BLOCK_VIEW EVNT:Control */
			WINDOW win;
			if (!(win = createCenteredWindow(VIEW_WINDOW, TASK_WIN, EM_ALL, VIEW_WINDOW_eh, 0L)))
				xvt_dm_post_error("Can't open window");
			/* TAG END GEOPHYSICS_BLOCK_VIEW EVNT:Control */
			}
			break;
		case GEOPHYSICS_PADDING_TYPE: /* "pad type" */
			{
			/* TAG BEGIN GEOPHYSICS_PADDING_TYPE EVNT:Control */
			updateGeophysicsOptions (xdWindow);
			/* TAG END GEOPHYSICS_PADDING_TYPE EVNT:Control */
			}
			break;
		case GEOPHYSICS_PADDING_PARAM: /* "pad value" */
			{
			/* TAG BEGIN GEOPHYSICS_PADDING_PARAM EVNT:Control */
			/*
				Edit control was operated.
			*/
			if (xdEvent->v.ctl.ci.v.edit.focus_change) {
				if (xdEvent->v.ctl.ci.v.edit.active) {
					/*
						focus has entered the control
					*/
				} else {
					/*
						focus has left the control
					*/
				}
			} else {
				/* 
					Contents of control were changed
				*/
			}
			/* TAG END GEOPHYSICS_PADDING_PARAM EVNT:Control */
			}
			break;
		default:
			break;
		}
		}
		break;
	case E_FONT:
		/*
			User issued font command on window menu bar (menu bar at top of
			screen for Mac/CH).
		*/
		{
		/* TAG BEGIN EVNT:Font */
		/* TAG END EVNT:Font */
		}
		break;
	case E_TIMER:
		/*
			Timer associated with window went off.
		*/
		{
		/* TAG BEGIN EVNT:Timer */
		/* TAG END EVNT:Timer */
		}
		break;
	case E_USER:
		/*
			Application initiated.
		*/
		{
		/* TAG BEGIN EVNT:User */
		switch (xdEvent->v.user.id) {
		case -1:
		default:
			break;
		}
		/* TAG END EVNT:User */
		}
		break;
	default:
		break;
	}
	/* TAG BEGIN SPCL:Bottom */
#ifdef XVT_R40_TXEDIT_BEHAVIOR
	xvt_tx_process_event(xdWindow, xdEvent);
#endif
	/* TAG END SPCL:Bottom */
	return 0L;
}
